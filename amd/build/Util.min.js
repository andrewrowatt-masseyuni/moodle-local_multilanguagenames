define("local_multilanguagenames/Util",["exports"],(function(_exports){function _classPrivateMethodInitSpec(obj,privateSet){!function(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}(obj,privateSet),privateSet.add(obj)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classStaticPrivateFieldSpecGet(receiver,classConstructor,descriptor){return function(receiver,classConstructor){if(receiver!==classConstructor)throw new TypeError("Private static access of wrong provenance")}(receiver,classConstructor),function(descriptor,action){if(void 0===descriptor)throw new TypeError("attempted to "+action+" private static field before its declaration")}(descriptor,"get"),function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,descriptor)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var _parseName=new WeakSet,_updateNameCount=new WeakSet;
/**
   * TODO describe module Util
   *
   * @module     local_multilanguagenames/Util
   * @copyright  2025 Andrew Rowatt <A.J.Rowatt@massey.ac.nz>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
class Util{constructor(sectionOrActivityNameOrName1,name1lang){let name2=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",name2lang=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",name3=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",name3lang=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";_classPrivateMethodInitSpec(this,_updateNameCount),_classPrivateMethodInitSpec(this,_parseName),_defineProperty(this,"sectionOrActivityName",""),_defineProperty(this,"multilanguageName",!1),_defineProperty(this,"nameCount",0),_defineProperty(this,"name1",""),_defineProperty(this,"name1lang","en"),_defineProperty(this,"name2",""),_defineProperty(this,"name2lang","en"),_defineProperty(this,"name3",""),_defineProperty(this,"name3lang","en"),void 0===name1lang?(this.sectionOrActivityName=sectionOrActivityNameOrName1,_classPrivateMethodGet(this,_parseName,_parseName2).call(this)):(this.name1=sectionOrActivityNameOrName1,this.name1lang=name1lang,this.nameCount=1,this.name2=name2,this.name2lang=name2lang,name2&&name2lang&&(this.nameCount=2),this.name3=name3,this.name3lang=name3lang,name3&&name3lang&&(this.nameCount=3))}isGeneratedHTMLValidMultilanguageName(sectionOrActivityName){return new Util(sectionOrActivityName).multilanguageName}convertToMultilanguageName(){if(!this.multilanguageName){let[name1,name2,name3]=this.sectionOrActivityName.trim().split("|");this.name3=(name3||"").trim(),this.name2=(name2||"").trim()||this.name3,this.name1=(name1||"").trim()||this.name2||"Unnamed section",this.nameCount=1+(this.name2?1:0)+(this.name3?1:0),this.multilanguageName=!0}}generateHTML(){_classPrivateMethodGet(this,_updateNameCount,_updateNameCount2).call(this);let html=_classStaticPrivateFieldSpecGet(Util,Util,_CONTAINER_START_FRAGMENT),namefragement="";return this.nameCount>=1&&(namefragement="en"===this.name1lang?_classStaticPrivateFieldSpecGet(Util,Util,_NAME_FRAGMENT_EN):_classStaticPrivateFieldSpecGet(Util,Util,_NAME_FRAGMENT),html+=namefragement.replace(/{level}/g,1).replace(/{lang}/g,this.name1lang).replace(/{name}/g,this.name1)),this.nameCount>=2&&this.name2&&(html+=_classStaticPrivateFieldSpecGet(Util,Util,_DIVIDER_FRAGMENT),namefragement="en"===this.name2lang?_classStaticPrivateFieldSpecGet(Util,Util,_NAME_FRAGMENT_EN):_classStaticPrivateFieldSpecGet(Util,Util,_NAME_FRAGMENT),html+=namefragement.replace(/{level}/g,2).replace(/{lang}/g,this.name2lang).replace(/{name}/g,this.name2)),3===this.nameCount&&(html+=_classStaticPrivateFieldSpecGet(Util,Util,_DIVIDER_FRAGMENT),namefragement="en"===this.name3lang?_classStaticPrivateFieldSpecGet(Util,Util,_NAME_FRAGMENT_EN):_classStaticPrivateFieldSpecGet(Util,Util,_NAME_FRAGMENT),html+=namefragement.replace(/{level}/g,3).replace(/{lang}/g,this.name3lang).replace(/{name}/g,this.name3)),html+=_classStaticPrivateFieldSpecGet(Util,Util,_CONTAINER_END_FRAGMENT),html}generatePlaintext(){_classPrivateMethodGet(this,_updateNameCount,_updateNameCount2).call(this);let plaintext="";return this.nameCount>=1&&(plaintext=this.name1),this.nameCount>=2&&this.name2&&(plaintext+="".concat(_classStaticPrivateFieldSpecGet(Util,Util,_DIVIDER_PLAINTEXT_FRAGMENT)).concat(this.name2)),3===this.nameCount&&(plaintext+="".concat(_classStaticPrivateFieldSpecGet(Util,Util,_DIVIDER_PLAINTEXT_FRAGMENT)).concat(this.name3)),plaintext}}function _parseName2(){let[match]=[...this.sectionOrActivityName.matchAll(_classStaticPrivateFieldSpecGet(Util,Util,_NAME_REGEX),"g")];match&&(void 0!==match[3]&&(this.multilanguageName=!0,this.nameCount=1,this.name1=match[3],this.name1lang=match[2]||"en"),void 0!==match[6]&&("3"==match[4]?(this.nameCount=3,this.name3=match[6],this.name3lang=match[5]||"en"):(this.nameCount=2,this.name2=match[6],this.name2lang=match[5]||"en",void 0!==match[9]&&(this.nameCount=3,this.name3=match[9],this.name3lang=match[8]||"en"))))}function _updateNameCount2(){this.name3?this.nameCount=3:this.name2?this.nameCount=2:this.nameCount=1}var _CONTAINER_START_FRAGMENT={writable:!0,value:'<span class="mlnc">'},_NAME_REGEX_FRAGMENT={writable:!0,value:'<span class="n(\\d)"(?: lang="(..)" xml:lang="..")?>(.*?)<\\/span>'},_NAME_FRAGMENT={writable:!0,value:'<span class="n{level}" lang="{lang}" xml:lang="{lang}">{name}</span>'},_NAME_FRAGMENT_EN={writable:!0,value:'<span class="n{level}">{name}</span>'},_DIVIDER_PLAINTEXT_FRAGMENT={writable:!0,value:" | "},_DIVIDER_REGEX_FRAGMENT={writable:!0,value:"<span> \\| <\\/span>"},_DIVIDER_FRAGMENT={writable:!0,value:"<span>".concat(_classStaticPrivateFieldSpecGet(Util,Util,_DIVIDER_PLAINTEXT_FRAGMENT),"</span>")},_CONTAINER_END_FRAGMENT={writable:!0,value:"</span>"},_NAME_REGEX={writable:!0,value:new RegExp("".concat(_classStaticPrivateFieldSpecGet(Util,Util,{writable:!0,value:'<span class="mlnc">'})).concat(_classStaticPrivateFieldSpecGet(Util,Util,_NAME_REGEX_FRAGMENT),"(?:").concat(_classStaticPrivateFieldSpecGet(Util,Util,_DIVIDER_REGEX_FRAGMENT)).concat(_classStaticPrivateFieldSpecGet(Util,Util,_NAME_REGEX_FRAGMENT),"(?:").concat(_classStaticPrivateFieldSpecGet(Util,Util,_DIVIDER_REGEX_FRAGMENT)).concat(_classStaticPrivateFieldSpecGet(Util,Util,_NAME_REGEX_FRAGMENT),")?)?").concat(_classStaticPrivateFieldSpecGet(Util,Util,{writable:!0,value:"<\\/span>"})),"g")},_default=Util;return _exports.default=_default,_exports.default}));

//# sourceMappingURL=Util.min.js.map