{"version":3,"file":"Util.min.js","sources":["../src/Util.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module Util\n *\n * @module     local_multilanguagenames/Util\n * @copyright  2025 2025 Andrew Rowatt <A.J.Rowatt@massey.ac.nz>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n// https://regex101.com/r/cRgZFS\n// https://regex101.com/r/sIVMIq\n// https://regex101.com/r/bDAO3Z\n// https://regex101.com/r/Wsn3yl name fragment\n\n/* eslint-disable max-len */\nclass Util {\n    static #CONTAINER_START_REGEX_FRAGMENT = '<span class=\"mlnc\">';\n    static #NAME_REGEX_FRAGMENT = '<span class=\"mln[1-3]\" lang=\"(..)\"(?: xml:lang=\"..\")?>(.*?)<\\\\/span>';\n    static #DIVIDER_REGEX_FRAGMENT = '<span class=\"divider\"> \\\\| <\\\\/span>';\n    static #CONTAINER_END_REGEX_FRAGMENT = '<\\\\/span>';\n\n    static #NAME_REGEX = new RegExp(`${Util.#CONTAINER_START_REGEX_FRAGMENT}${Util.#NAME_REGEX_FRAGMENT}(?:${Util.#DIVIDER_REGEX_FRAGMENT}${Util.#NAME_REGEX_FRAGMENT}(?:${Util.#DIVIDER_REGEX_FRAGMENT}${Util.#NAME_REGEX_FRAGMENT})?)?${Util.#CONTAINER_END_REGEX_FRAGMENT}`, 'g');\n\n    // Default state\n    sectionOrActivityName = '';\n    multilanguageName = false;\n    nameCount = 0;\n    name1 = '';\n    name1lang = 'en';\n    name2 = '';\n    name2lang = 'en';\n    name3 = '';\n    name3lang = 'en';\n\n    constructor(sectionOrActivityNameOrName1, name1lang, name2 = '', name2lang = '', name3 = '', name3lang = '') {\n        if (name1lang === undefined) {\n            this.sectionOrActivityName = sectionOrActivityNameOrName1;\n            this.#parseName();\n        } else {\n            this.name1 = sectionOrActivityNameOrName1;\n            this.name1lang = name1lang;\n            this.nameCount = 1;\n\n            this.name2 = name2;\n            this.name2lang = name2lang;\n            if (name2 && name2lang) {\n                this.nameCount = 2;\n            }\n\n            this.name3 = name3;\n            this.name3lang = name3lang;\n            if (name3 && name3lang) {\n                this.nameCount = 3;\n            }\n\n        }\n    }\n\n    #parseName() {\n        let [match] = [...this.sectionOrActivityName.matchAll(Util.#NAME_REGEX, 'g')];\n\n        if (match) {\n            if (match[1] !== undefined && match[2] !== undefined) {\n                this.multilanguageName = true;\n                this.nameCount = 1;\n                this.name1 = match[2];\n                this.name1lang = match[1];\n\n                if (match[3] !== undefined && match[4] !== undefined) {\n                    this.nameCount = 2;\n                    this.name2 = match[4];\n                    this.name2lang = match[3];\n\n                    if (match[5] !== undefined && match[6] !== undefined) {\n                        this.nameCount = 3;\n                        this.name3 = match[6];\n                        this.name3lang = match[5];\n                    }\n                }\n            }\n        }\n    }\n\n    isGeneratedHTMLValidMultilanguageName(sectionOrActivityName) {\n        const test = new Util(sectionOrActivityName);\n        return test.multilanguageName;\n    }\n\n    convertToMultilanguageName() {\n        /* Parse the sectionOrActivityName from a standard format e.g., from Paepae k≈çrero | Keeping in touch */\n        let [name1, name2, name3] = this.sectionOrActivityName.trim().split(' | ');\n\n            window.console.log(name1);\n            window.console.log(name2);\n            window.console.log(name3);\n    }\n\n    /**\n     * Generate the HTML for the multilanguage name.\n     *\n     * @returns @string\n     */\n    generateHTML() {\n        return this.nameCount;\n    }\n}\n\nexport default Util;"],"names":["Util","static","RegExp","CONTAINER_START_REGEX_FRAGMENT","NAME_REGEX_FRAGMENT","DIVIDER_REGEX_FRAGMENT","CONTAINER_END_REGEX_FRAGMENT","sectionOrActivityName","multilanguageName","nameCount","name1","name1lang","name2","name2lang","name3","name3lang","constructor","sectionOrActivityNameOrName1","arguments","length","undefined","this","parseName","match","matchAll","NAME_REGEX","isGeneratedHTMLValidMultilanguageName","convertToMultilanguageName","trim","split","window","console","log","generateHTML","_exports","default"],"mappings":";;;;;;;;AA8BA,MAAMA,KACFC,sCAAyC,sBACzCA,2BAA8B,uEAC9BA,8BAAiC,uCACjCA,oCAAuC,YAEvCA,kBAAqB,IAAIC,OAAO,GAAGF,MAAKG,iCAAkCH,MAAKI,yBAA0BJ,MAAKK,yBAA0BL,MAAKI,yBAA0BJ,MAAKK,yBAA0BL,MAAKI,0BAA2BJ,MAAKM,+BAAiC,KAG5QC,sBAAwB,GACxBC,mBAAoB,EACpBC,UAAY,EACZC,MAAQ,GACRC,UAAY,KACZC,MAAQ,GACRC,UAAY,KACZC,MAAQ,GACRC,UAAY,KAEZC,YAAYC,6BAA8BN,WAAmE,IAAxDC,MAAKM,UAAAC,eAAAC,IAAAF,aAAAA,aAAG,GAAIL,UAASK,UAAAC,eAAAC,IAAAF,aAAAA,aAAG,GAAIJ,MAAKI,UAAAC,eAAAC,IAAAF,aAAAA,aAAG,GAAIH,UAASG,UAAAC,eAAAC,IAAAF,aAAAA,aAAG,QACnFE,IAAdT,WACAU,KAAKd,sBAAwBU,6BAC7BI,MAAKC,cAELD,KAAKX,MAAQO,6BACbI,KAAKV,UAAYA,UACjBU,KAAKZ,UAAY,EAEjBY,KAAKT,MAAQA,MACbS,KAAKR,UAAYA,UACbD,OAASC,YACTQ,KAAKZ,UAAY,GAGrBY,KAAKP,MAAQA,MACbO,KAAKN,UAAYA,UACbD,OAASC,YACTM,KAAKZ,UAAY,IAM7Ba,aACI,IAAKC,OAAS,IAAIF,KAAKd,sBAAsBiB,SAASxB,MAAKyB,WAAa,MAEpEF,YACiBH,IAAbG,MAAM,SAAiCH,IAAbG,MAAM,KAChCF,KAAKb,mBAAoB,EACzBa,KAAKZ,UAAY,EACjBY,KAAKX,MAAQa,MAAM,GACnBF,KAAKV,UAAYY,MAAM,QAENH,IAAbG,MAAM,SAAiCH,IAAbG,MAAM,KAChCF,KAAKZ,UAAY,EACjBY,KAAKT,MAAQW,MAAM,GACnBF,KAAKR,UAAYU,MAAM,QAENH,IAAbG,MAAM,SAAiCH,IAAbG,MAAM,KAChCF,KAAKZ,UAAY,EACjBY,KAAKP,MAAQS,MAAM,GACnBF,KAAKN,UAAYQ,MAAM,MAO3CG,sCAAsCnB,uBAElC,OADa,IAAIP,KAAKO,uBACVC,kBAGhBmB,6BAEI,IAAKjB,MAAOE,MAAOE,OAASO,KAAKd,sBAAsBqB,OAAOC,MAAM,OAEhEC,OAAOC,QAAQC,IAAItB,OACnBoB,OAAOC,QAAQC,IAAIpB,OACnBkB,OAAOC,QAAQC,IAAIlB,OAQ3BmB,eACI,OAAOZ,KAAKZ,WAEnByB,SAAAC,QAEcnC,KAAI,OAAAkC,SAAAC"}